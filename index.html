<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Drag-and-Drop Builder</title>
		<link rel="stylesheet" href="resources/Style.css" type="text/css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css">

		<script src="resources/Main.js"></script>
	</head>
	<body>
	<div class="canvas-wrapper">
		<div id="canvas-panel">
			<div id="canvas-controller">
				<span class="canvas-btn primary" title="Save and publish your layout">
					<i class="fas fa-upload"></i> Publish
				</span>
				<span class="canvas-btn" title="Preview how the layout looks without editing tools">
					<i class="fas fa-eye"></i> Preview
				</span>
				<span class="canvas-btn" title="Change the viewport size to simulate different devices">
					<i class="fas fa-desktop"></i> Viewport
				</span>
				<span class="canvas-btn" title="Toggle dashed borders on compiled elements for layout visibility">
					<i class="fas fa-border-style"></i> Toggle Borders
				</span>
				<span class="canvas-btn" title="Add temporary margins to compiled elements for spacing visualization">
					<i class="fas fa-arrows-alt"></i> Toggle Spacing
				</span>
			</div>

			<div id="canvas">
				<div class="droppable" id="drop-area">
					<!-- Dropped components will appear here -->
				</div>
			</div>
		</div>

		<div id="toolbar">

		</div>
	</div>
	<script>
		(async function main() {

			// âœ… Wait until ready
			const dropManager = await dropManagerInit('drop-area');

			toolsManagerInit("toolbar", (tabManager) => {
				tabManager.addTab({
					tab: 'blocks',
					description: 'Drag HTML elements to the canvas',
					icon: 'fas fa-toolbox',
					contentIdentifier: 'blocks-content',
					fallback: () => {
						blockManagerInit('blocks-content', blockManager => {
							blockManager.setCategoryLabel('layouts', 'Layouts', 'fas fa-layer-group');
							blockManager.register('layouts', { label: 'Row', type: 'div', context: 'Row' });
							blockManager.register('layouts', { label: 'Section', type: 'section', context: 'Section' });

							blockManager.setCategoryLabel('controls', 'Form Controls', 'fas fa-sliders-h');
							blockManager.register('controls', { label: 'Input', type: 'input', context: 'Type here' });
							blockManager.register('controls', { label: 'Button', type: 'button', context: 'Click me' });

							blockManager.setCategoryLabel('components', 'Components', 'fas fa-cube');
							blockManager.register('components', { label: 'List', type: 'ul', context: 'List' });
							blockManager.register('components', { label: 'Image', type: 'img', context: 'Image' });

							blockManager.setCategoryLabel('content', 'Content', 'fas fa-newspaper');
							blockManager.register('content', { label: 'Heading', type: 'h1', context: 'Header' });
							blockManager.register('content', { label: 'Paragraph', type: 'p', context: 'Paragraph' });

							blockManager.renderAll();
						});
					}
				});

				tabManager.addTab({
					tab: 'settings',
					description: 'Edit styles for selected element',
					icon: 'fas fa-cog'
				});

				tabManager.addTab({
					tab: 'structure',
					description: 'View and manage the DOM structure of the canvas',
					icon: 'fas fa-sitemap',
					contentIdentifier: 'structure-content',
					fallback: () => {
						structureView('structure-content', dropManager.manager);
					}
				});

				tabManager.addTab({
					tab: 'create',
					description: 'Create a new element or define custom class',
					icon: 'fas fa-plus'
				});
			});
		})();
	</script>
	</body>
</html>